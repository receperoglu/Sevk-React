{"ast":null,"code":"import { extendComponent } from './extendComponent';\n/**\n * Generates a function to be attached to a React component, which can be called\n * as a replacement to setTimeout. In-flight async calls will be auto canceled if the component\n * is unmounting before the async code is executed, preventing bugs where code\n * accesses things within the component after being unmounted.\n */\n\nexport var safeSetTimeout = function safeSetTimeout(component) {\n  var activeTimeouts;\n  return function (cb, duration) {\n    if (!activeTimeouts) {\n      activeTimeouts = new Set();\n      extendComponent(component, {\n        componentWillUnmount: function componentWillUnmount() {\n          activeTimeouts.forEach(function (id) {\n            return clearTimeout(id);\n          });\n        }\n      });\n    }\n\n    var timeoutId = setTimeout(function () {\n      activeTimeouts.delete(timeoutId);\n      cb();\n    }, duration);\n    activeTimeouts.add(timeoutId);\n  };\n};","map":null,"metadata":{},"sourceType":"module"}