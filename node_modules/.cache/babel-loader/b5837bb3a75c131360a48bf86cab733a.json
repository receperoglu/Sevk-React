{"ast":null,"code":"import { EventGroup } from './EventGroup';\nimport { findScrollableParent } from './scroll';\nimport { getRect } from './dom/getRect';\nvar SCROLL_ITERATION_DELAY = 16;\nvar SCROLL_GUTTER = 100;\nvar MAX_SCROLL_VELOCITY = 15;\n/**\n * AutoScroll simply hooks up mouse events given a parent element, and scrolls the container\n * up/down depending on how close the mouse is to the top/bottom of the container.\n *\n * Once you don't want autoscroll any more, just dispose the helper and it will unhook events.\n *\n * @public\n * {@docCategory AutoScroll}\n */\n\nvar AutoScroll =\n/** @class */\nfunction () {\n  function AutoScroll(element) {\n    this._events = new EventGroup(this);\n    this._scrollableParent = findScrollableParent(element);\n    this._incrementScroll = this._incrementScroll.bind(this);\n    this._scrollRect = getRect(this._scrollableParent); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    if (this._scrollableParent === window) {\n      this._scrollableParent = document.body;\n    }\n\n    if (this._scrollableParent) {\n      this._events.on(window, 'mousemove', this._onMouseMove, true);\n\n      this._events.on(window, 'touchmove', this._onTouchMove, true);\n    }\n  }\n\n  AutoScroll.prototype.dispose = function () {\n    this._events.dispose();\n\n    this._stopScroll();\n  };\n\n  AutoScroll.prototype._onMouseMove = function (ev) {\n    this._computeScrollVelocity(ev);\n  };\n\n  AutoScroll.prototype._onTouchMove = function (ev) {\n    if (ev.touches.length > 0) {\n      this._computeScrollVelocity(ev);\n    }\n  };\n\n  AutoScroll.prototype._computeScrollVelocity = function (ev) {\n    if (!this._scrollRect) {\n      return;\n    }\n\n    var clientX;\n    var clientY;\n\n    if ('clientX' in ev) {\n      clientX = ev.clientX;\n      clientY = ev.clientY;\n    } else {\n      clientX = ev.touches[0].clientX;\n      clientY = ev.touches[0].clientY;\n    }\n\n    var scrollRectTop = this._scrollRect.top;\n    var scrollRectLeft = this._scrollRect.left;\n    var scrollClientBottom = scrollRectTop + this._scrollRect.height - SCROLL_GUTTER;\n    var scrollClientRight = scrollRectLeft + this._scrollRect.width - SCROLL_GUTTER; // variables to use for alternating scroll direction\n\n    var scrollRect;\n    var clientDirection;\n    var scrollClient; // if either of these conditions are met we are scrolling vertically else horizontally\n\n    if (clientY < scrollRectTop + SCROLL_GUTTER || clientY > scrollClientBottom) {\n      clientDirection = clientY;\n      scrollRect = scrollRectTop;\n      scrollClient = scrollClientBottom;\n      this._isVerticalScroll = true;\n    } else {\n      clientDirection = clientX;\n      scrollRect = scrollRectLeft;\n      scrollClient = scrollClientRight;\n      this._isVerticalScroll = false;\n    } // calculate scroll velocity and direction\n\n\n    if (clientDirection < scrollRect + SCROLL_GUTTER) {\n      this._scrollVelocity = Math.max(-MAX_SCROLL_VELOCITY, -MAX_SCROLL_VELOCITY * ((SCROLL_GUTTER - (clientDirection - scrollRect)) / SCROLL_GUTTER));\n    } else if (clientDirection > scrollClient) {\n      this._scrollVelocity = Math.min(MAX_SCROLL_VELOCITY, MAX_SCROLL_VELOCITY * ((clientDirection - scrollClient) / SCROLL_GUTTER));\n    } else {\n      this._scrollVelocity = 0;\n    }\n\n    if (this._scrollVelocity) {\n      this._startScroll();\n    } else {\n      this._stopScroll();\n    }\n  };\n\n  AutoScroll.prototype._startScroll = function () {\n    if (!this._timeoutId) {\n      this._incrementScroll();\n    }\n  };\n\n  AutoScroll.prototype._incrementScroll = function () {\n    if (this._scrollableParent) {\n      if (this._isVerticalScroll) {\n        this._scrollableParent.scrollTop += Math.round(this._scrollVelocity);\n      } else {\n        this._scrollableParent.scrollLeft += Math.round(this._scrollVelocity);\n      }\n    }\n\n    this._timeoutId = setTimeout(this._incrementScroll, SCROLL_ITERATION_DELAY);\n  };\n\n  AutoScroll.prototype._stopScroll = function () {\n    if (this._timeoutId) {\n      clearTimeout(this._timeoutId);\n      delete this._timeoutId;\n    }\n  };\n\n  return AutoScroll;\n}();\n\nexport { AutoScroll };","map":null,"metadata":{},"sourceType":"module"}